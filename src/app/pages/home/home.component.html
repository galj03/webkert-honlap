<main class="flexbox">
    <div class="container">
        <h1>WebDev String Orchestra</h1>
    </div>
    <div class="container">
        <p>Ide egy bevezető, ismertető szöveg fog kerülni az oldalról és a zenekarról.</p>
    </div>
    <!-- <div class="container">
        <h2>TODOs (for 2. milestone)</h2>
        <p>Create unique design</p>
        <p>Add admin page</p>
        <p>etc.</p>
    </div> -->

    <mat-card class="main-card">
      <mat-card-header>
        <mat-card-title>Posztok</mat-card-title>
      </mat-card-header>
      
      <mat-card-content>

      <!-- @if (isLoggedIn) { -->
        <form [formGroup]="postForm" (ngSubmit)="addPost()" class="form">
            <div class="form-row">
            <mat-form-field appearance="outline" class="post-title-input">
                <mat-label>Poszt címe</mat-label>
                <input matInput formControlName="title" placeholder="Cím">
            </mat-form-field>
            
            <button mat-flat-button color="primary" type="submit" class="add-button">Poszt hozzáadása</button>
            </div>
            
            <mat-form-field appearance="outline" class="full-width">
            <mat-label>Poszt tartalma</mat-label>
            <input matInput formControlName="content" placeholder="Tartalom">
            </mat-form-field>
        </form>
      <!-- } -->
      
      <div class="container">
        <div class="button-group">
            <button (click)="isExpanded = 'not-expanded'" [ngClass]="{'active': isExpanded === 'not-expanded'}">-</button>
            <button (click)="isExpanded = 'expanded'" [ngClass]="{'active': isExpanded === 'expanded'}">+</button>
        </div>

        <div [ngClass]="isExpanded" class="container">
            @for (post of posts; track $index) {
                    <mat-card class="post-card">
                        <mat-card-header>
                            <mat-card-title>{{ post.title }}</mat-card-title>
                        </mat-card-header>
                        
                        <mat-card-content>
                            <div class="post-text">
                                {{ post.content }}
                            </div>
                            <mat-divider></mat-divider>
                        </mat-card-content>

                        <mat-card-footer>
                            <div>{{ post.postedBy.name.lastName }} {{post.postedBy.name.firstName}}</div>
                            <div>{{ post.date | postDateFormatter}}</div>
                        </mat-card-footer>
                    </mat-card>
            }
        </div>
    </div>
      </mat-card-content>
</mat-card>
</main>